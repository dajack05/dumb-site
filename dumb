#/bin/bash

arg="$1"

if [[ "$arg" == "install" ]]
then
    echo "Installing..."
    npm install
    composer install
    echo "Done!"
elif [[ "$arg" == "serve" ]]
then
    echo "Serving..."    
    xdg-open </dev/null &> /dev/null http://localhost:8080 &
    npm run dev
    exit 1
elif [[ "$arg" == "build" ]]
then
    echo "Building..."
    npm run build
    rm -rf ./dist
    mkdir ./dist
    cp *.php ./dist
    cp LICENSE ./dist
    cp site.toml ./dist
    cp style.css ./dist
    cp -r ./pages ./dist
    cp -r ./vendor ./dist
    exit 1
elif [[ "$arg" == "strip" ]]
then
    echo "Stripping Repo"
    rm -rf .git
    rm .gitignore
    echo "Done!"
    exit 1
fi

echo "Usage: dumb [command]"
echo "---------------------"
echo "Commands:"
echo "  install - Install all libraries."
echo "    serve - Start a local server and watch for tailwind changes."
echo "    build - Generate production output into ./build directory."
echo "    strip - Remove GIT related stuff."
exit 1
